@model TWSA.Models.EventAnnouncement

@{
    ViewData["Title"] = "Post Event";
}

<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h2 class="card-title text-center text-success mb-4">Post Event</h2>

                <form id="postEventForm" method="post" action="/Event/PostEvent" enctype="multipart/form-data">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="Subject">Event Name</label>
                            <input type="text" id="Subject" name="Subject" class="form-control" required />
                        </div>
                        <div class="form-group col-md-6">
                            <label for="EventDateTime">Event Date</label>
                            <input type="datetime-local" id="EventDateTime" name="EventDateTime" class="form-control" required />
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="Location">Event Location</label>
                            <input type="text" id="Location" name="Location" class="form-control" required />
                        </div>
                        <div class="form-group col-md-6">
                            <label for="Category">Category</label>
                            <input type="text" id="Category" name="Category" class="form-control" required />
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="Description">Event Description</label>
                        <textarea id="Description" name="Description" class="form-control" rows="4" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="MediaAttachment">Media Attachment</label>
                        <input type="file" id="MediaAttachment" name="MediaAttachment" class="form-control-file" />
                    </div>
                    <div class="form-group form-check">
                        <input type="checkbox" id="IsEvent" name="IsEvent" class="form-check-input" />
                        <label for="IsEvent" class="form-check-label">Is Event?</label>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Submit</button>
                </form>

                <div class="progress mt-4" style="height: 20px;">
                    <div id="progressBar" class="progress-bar bg-success" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('postEventForm');
            const progressBar = document.getElementById('progressBar');
            const fields = form.querySelectorAll('input, textarea, select');
            const totalFields = fields.length;

            function updateProgress() {
                let filledFields = 0;
                fields.forEach(field => {
                    if (field.value.trim() !== '') {
                        filledFields++;
                    }
                });
                const progress = (filledFields / totalFields) * 100;
                progressBar.style.width = progress + '%';
                progressBar.setAttribute('aria-valuenow', progress);
                progressBar.textContent = Math.round(progress) + '%';
            }

            fields.forEach(field => {
                field.addEventListener('input', updateProgress);
            });

            updateProgress(); // Initial call to set progress bar on page load
        });
    </script>
}
